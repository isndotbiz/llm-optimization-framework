============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Jdmal\AppData\Local\Programs\Python\Python312\python.exe
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
metadata: {'Python': '3.12.10', 'Platform': 'Windows-11-10.0.26200-SP0', 'Packages': {'pytest': '9.0.2', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.12.0', 'Faker': '39.0.0', 'asyncio': '1.3.0', 'benchmark': '5.2.3', 'cov': '7.0.0', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.15.1', 'profiling': '1.8.1', 'randomly': '4.0.1', 'timeout': '2.4.0', 'xdist': '3.8.0'}, 'JAVA_HOME': 'C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.17.10-hotspot'}
Using --randomly-seed=1660502530
rootdir: D:\models
configfile: pytest.ini
plugins: anyio-4.12.0, Faker-39.0.0, asyncio-1.3.0, benchmark-5.2.3, cov-7.0.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, mock-3.15.1, profiling-1.8.1, randomly-4.0.1, timeout-2.4.0, xdist-3.8.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 300.0s
timeout method: thread
timeout func_only: False
collecting ... collected 23 items

tests/unit/test_example_unit.py::TestPerformanceTracking::test_track_execution_time PASSED [  4%]
tests/unit/test_example_unit.py::TestPerformanceTracking::test_track_memory_usage PASSED [  8%]
tests/unit/test_example_unit.py::TestSampleData::test_sample_prompts PASSED [ 13%]
tests/unit/test_example_unit.py::TestSampleData::test_sample_workflow_yaml PASSED [ 17%]
tests/unit/test_example_unit.py::TestSampleData::test_batch_job_samples PASSED [ 21%]
tests/unit/test_example_unit.py::TestMockingPatterns::test_mock_model_config PASSED [ 26%]
tests/unit/test_example_unit.py::TestMockingPatterns::test_mock_logger PASSED [ 30%]
tests/unit/test_example_unit.py::TestMockingPatterns::test_mock_ai_router PASSED [ 34%]
tests/unit/test_example_unit.py::TestMachineDetection::test_path_detection_by_machine PASSED [ 39%]
tests/unit/test_example_unit.py::TestMachineDetection::test_machine_type_detection PASSED [ 43%]
tests/unit/test_example_unit.py::TestFixtureCombination::test_with_all_fixtures PASSED [ 47%]
tests/unit/test_example_unit.py::TestTemporaryDirectories::test_temp_checkpoint_dir_creation PASSED [ 52%]
tests/unit/test_example_unit.py::TestTemporaryDirectories::test_write_to_temp_dir PASSED [ 56%]
tests/unit/test_example_unit.py::TestTemporaryDirectories::test_multiple_temp_dirs PASSED [ 60%]
tests/unit/test_example_unit.py::TestParametrization::test_prompt_categorization[10-short] PASSED [ 65%]
tests/unit/test_example_unit.py::TestParametrization::test_model_provider_mapping[ollama-mistral-ollama] PASSED [ 69%]
tests/unit/test_example_unit.py::TestParametrization::test_model_provider_mapping[mlx-qwen-mlx] PASSED [ 73%]
tests/unit/test_example_unit.py::TestParametrization::test_model_provider_mapping[gguf-dolphin-llama.cpp] PASSED [ 78%]
tests/unit/test_example_unit.py::TestParametrization::test_prompt_categorization[100-medium] PASSED [ 82%]
tests/unit/test_example_unit.py::TestParametrization::test_prompt_categorization[1000-long] PASSED [ 86%]
tests/unit/test_example_unit.py::TestDatabaseOperations::test_database_initialization PASSED [ 91%]
tests/unit/test_example_unit.py::TestDatabaseOperations::test_database_message_insert PASSED [ 95%]
tests/unit/test_example_unit.py::TestDatabaseOperations::test_database_with_sample_data PASSED [100%]
ERROR: Coverage failure: total of 4 is less than fail-under=30


=============================== tests coverage ================================
______________ coverage: platform win32, python 3.12.10-final-0 _______________

Name                               Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------------------------
add_noqa.py                           15     15      6      0     0%   4-27
ai-router-api.py                      17     17      2      0     0%   7-28
ai-router-enhanced.py                916    916    270      0     0%   10-1892
ai-router-mlx-client.py              218    218     76      0     0%   7-339
ai-router-mlx-enhanced.py            546    546    176      0     0%   9-888
ai-router-mlx.py                     158    158     36      0     0%   7-433
ai-router-truenas-production.py      464    464     92      0     0%   9-947
ai-router-truenas.py                 726    726    138      0     0%   12-1327
ai-router.py                         581    581    152      0     0%   8-1627
benchmark_mlx.py                      42     42      2      0     0%   7-78
comprehensive_lint_fix.py             39     39     16      0     0%   4-71
config\__init__.py                     2      2      0      0     0%   8-10
config\models.py                      16     16      2      0     0%   18-301
fix_all_e501.py                      122    122     70      0     0%   4-201
fix_e122.py                           33     33     18      0     0%   4-69
fix_e501.py                           71     71     50      0     0%   4-112
fix_e501_final.py                     35     35     18      0     0%   4-75
health_assessment.py                 191    191     58      0     0%   4-296
logging_config.py                      9      9      0      0     0%   1-20
logging_config_v2.py                 131    131     40      0     0%   28-441
mlx-ollama-bridge.py                 239    239     48      0     0%   32-636
mlx-server.py                        194    194     40      0     0%   11-390
model-manager.py                     181    181     56      0     0%   7-329
ollama-model-analysis.py             189    189     72      0     0%   21-359
providers\__init__.py                112    112     32      0     0%   27-430
providers\base_provider.py            46     46      6      0     0%   6-219
providers\claude_provider.py         151    151     50      0     0%   6-500
providers\example_usage.py           161    161     40      0     0%   8-321
providers\llama_cpp_provider.py      157    157     66      0     0%   6-438
providers\ollama_provider.py         173    173     46      0     0%   6-466
providers\openai_provider.py         155    155     32      0     0%   6-494
providers\openrouter_provider.py     150    150     34      0     0%   6-438
providers\provider_errors.py          85     85     36      0     0%   7-214
setup_mlx_environment.py             263    263     60      0     0%   18-463
test-mlx-models.py                   259    259     60      0     0%   9-589
test_model_loading.py                 70     70     12      0     0%   4-105
test_prompt.py                        16     16      2      0     0%   1-30
tests\conftest.py                    201     35     36      9    76%   28->30, 46, 49-59, 67, 89-93, 133-135, 377-405, 442, 461, 481->exit, 536-543, 547, 555, 556->exit
tests\unit\test_example_unit.py      162     10     20      4    89%   243, 245, 248-249, 258-265
------------------------------------------------------------------------------
TOTAL                               7296   6978   1970     13     4%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
FAIL Required test coverage of 30% not reached. Total coverage: 3.70%
============================= 23 passed in 9.70s ==============================
